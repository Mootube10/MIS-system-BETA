<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Information System</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .hidden { display: none; }
        .navbar { background: #333; padding: 10px; color: white; }
        .navbar button { margin: 5px; padding: 10px; }
        .log-entry { border: 3px solid red; padding: 10px; margin: 10px; }
        .orange { border-color: orange; }
        .green { border-color: green; }
        .profile-icon { position: absolute; top: 10px; right: 10px; width: 40px; height: 40px; border-radius: 50%; background: gray; cursor: pointer; }
    </style>
</head>
<body>

    <!-- Login Page -->
    <div id="loginPage">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username"><br><br>
        <input type="text" id="position" placeholder="Position"><br><br>
        <input type="password" id="password" placeholder="Password"><br><br>
        <button onclick="login()">Login</button>
    </div>

    <!-- Dashboard (Hidden Initially) -->
    <div id="dashboard" class="hidden">
        <div class="navbar">
            <button onclick="showPage('home')">Home</button>
            <button onclick="showPage('logs')">Logs</button>
            <button onclick="showPage('createLog')">Create Log</button>
            <button onclick="showPage('settings')">Settings</button>
            <button onclick="logout()">Logout</button>
            <span id="userDetails"></span>
            <div class="profile-icon" onclick="showProfile()"></div>
        </div>

        <!-- Home Page -->
        <div id="home" class="content">
            <h2>Welcome to MIS</h2>
            <p>Use the navigation bar to manage logs.</p>
        </div>

        <!-- Logs Page -->
        <div id="logs" class="content hidden">
            <h2>Logs</h2>
            <div id="logList"></div>
        </div>

        <!-- Create Log Page -->
        <div id="createLog" class="content hidden">
            <h2>Create Log</h2>
            <input type="text" id="logTitle" placeholder="Issue Title"><br><br>
            <input type="text" id="logReason" placeholder="Reason"><br><br>
            <textarea id="logDescription" placeholder="Describe the issue"></textarea><br><br>
            <button onclick="submitLog()">Submit Log</button>
        </div>

        <!-- Settings Page -->
        <div id="settings" class="content hidden">
            <h2>System Information</h2>
            <p>Version: 1.0.0</p>
            <p>Model: General Model</p>
        </div>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (!localStorage.getItem("loggedInUser")) {
            showLoginPage();
        } else {
            showDashboard();
        }
    });

    function showLoginPage() {
        document.getElementById("loginPage").style.display = "block";
        document.getElementById("dashboard").style.display = "none";
    }

    function showDashboard() {
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        document.getElementById("userDetails").innerText = 
            localStorage.getItem("loggedInUser") + " (" + localStorage.getItem("userPosition") + ")";
        showPage('home');
    }

    function login() {
        let username = document.getElementById("username").value;
        let position = document.getElementById("position").value;
        let password = document.getElementById("password").value;

        if (username && position && password) {
            localStorage.setItem("loggedInUser", username);
            localStorage.setItem("userPosition", position);
            showDashboard();
        } else {
            alert("Please enter all details.");
        }
    }

    function logout() {
        localStorage.removeItem("loggedInUser");
        localStorage.removeItem("userPosition");
        showLoginPage();
    }

    function showPage(page) {
        document.querySelectorAll(".content").forEach(div => div.classList.add("hidden"));
        document.getElementById(page).classList.remove("hidden");
    }

    function submitLog() {
        let title = document.getElementById("logTitle").value;
        let reason = document.getElementById("logReason").value;
        let description = document.getElementById("logDescription").value;

        if (!title || !reason || !description) {
            alert("Please fill in all log details.");
            return;
        }

        let logId = Date.now();
        let logEntry = `
            <div class="log-entry" id="log-${logId}">
                <p><strong>Issue:</strong> ${title}</p>
                <p><strong>Reason:</strong> ${reason}</p>
                <p><strong>Description:</strong> ${description}</p>
                <p><strong>Status:</strong> <span id="status-${logId}">Awaiting Resolution</span></p>
                <button onclick="attachUser(${logId})">Attach</button>
                <button onclick="assignLog(${logId})">Assign</button>
                <button onclick="resolveLog(${logId})">Mark as Resolved</button>
            </div>
        `;

        document.getElementById("logList").innerHTML += logEntry;

        // Clear input fields
        document.getElementById("logTitle").value = "";
        document.getElementById("logReason").value = "";
        document.getElementById("logDescription").value = "";
    }

    function attachUser(logId) {
        let username = localStorage.getItem("loggedInUser");
        let position = localStorage.getItem("userPosition");
        document.getElementById(`status-${logId}`).innerText = `Claimed by ${username} - ${position}`;
        document.getElementById(`log-${logId}`).classList.remove("red");
        document.getElementById(`log-${logId}`).classList.add("orange");
    }

    function assignLog(logId) {
        let username = localStorage.getItem("loggedInUser");
        let position = localStorage.getItem("userPosition");
        document.getElementById(`status-${logId}`).innerText = `Assigned to ${username} - ${position}`;
        document.getElementById(`log-${logId}`).classList.remove("red");
        document.getElementById(`log-${logId}`).classList.add("orange");
    }

    function resolveLog(logId) {
        let username = localStorage.getItem("loggedInUser");
        let position = localStorage.getItem("userPosition");
        document.getElementById(`status-${logId}`).innerText = `Resolved by ${username} - ${position}`;
        document.getElementById(`log-${logId}`).classList.remove("orange");
        document.getElementById(`log-${logId}`).classList.add("green");
    }

    function showProfile() {
        alert("Logged in as: " + localStorage.getItem("loggedInUser"));
    }
</script>

</body>
</html>
