<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Management Information System</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; text-align: center; }
        .container { max-width: 600px; margin: auto; padding: 20px; }
        .hidden { display: none; }
        .nav { background: #222; color: white; padding: 10px; }
        .nav button { margin: 5px; padding: 10px; }
        .log { padding: 10px; margin: 10px; border: 2px solid red; }
        .log.assigned { border-color: orange; }
        .log.resolved { border-color: green; }
        .profile { position: absolute; top: 10px; right: 10px; background: #ddd; border-radius: 50%; width: 40px; height: 40px; text-align: center; cursor: pointer; }
    </style>
</head>
<body>

    <!-- Profile Dropdown -->
    <div class="profile" onclick="toggleProfile()">ðŸ‘¤</div>
    <div id="profileInfo" class="hidden"></div>

    <!-- Login Page -->
    <div id="loginPage" class="container">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username"><br><br>
        <input type="text" id="position" placeholder="Position (e.g., Principal, CEO)"><br><br>
        <input type="password" id="password" placeholder="Password"><br><br>
        <button onclick="login()">Login</button>
        <button onclick="signup()">Sign Up</button>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden">
        <div class="nav">
            <button onclick="showSection('home')">Home</button>
            <button onclick="showSection('logs')">Logs</button>
            <button onclick="showSection('createLog')">Create Log</button>
            <button onclick="logout()">Logout</button>
        </div>

        <div id="home" class="container">
            <h2>Welcome to the MIS Dashboard</h2>
            <p>Use the navigation above to manage logs.</p>
        </div>

        <div id="logs" class="container hidden">
            <h2>Logs</h2>
            <div id="logList"></div>
        </div>

        <div id="createLog" class="container hidden">
            <h2>Create Log</h2>
            <input type="text" id="logName" placeholder="Issue Name"><br><br>
            <input type="text" id="logReason" placeholder="Reason"><br><br>
            <textarea id="logDescription" placeholder="Description"></textarea><br><br>
            <button onclick="submitLog()">Submit Log</button>
        </div>

        <div id="settings" class="container hidden">
            <h2>Settings</h2>
            <p>Version: 1.0.0</p>
            <p>Model: General Model</p>
        </div>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (!localStorage.getItem("loggedInUser")) {
            showLoginPage();
        } else {
            showDashboard();
        }
    });

    function showLoginPage() {
        document.getElementById("loginPage").classList.remove("hidden");
        document.getElementById("dashboard").classList.add("hidden");
    }

    function showDashboard() {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("dashboard").classList.remove("hidden");
        showSection('home');
        displayProfile();
        loadLogs();
    }

    function showSection(section) {
        document.getElementById("home").classList.add("hidden");
        document.getElementById("logs").classList.add("hidden");
        document.getElementById("createLog").classList.add("hidden");
        document.getElementById("settings").classList.add("hidden");
        document.getElementById(section).classList.remove("hidden");
    }

    function login() {
        let username = document.getElementById("username").value;
        let position = document.getElementById("position").value;
        let password = document.getElementById("password").value;

        let users = JSON.parse(localStorage.getItem("users") || "[]");
        let user = users.find(u => u.username === username && u.password === password);

        if (user) {
            localStorage.setItem("loggedInUser", JSON.stringify({ username, position }));
            showDashboard();
        } else {
            alert("Invalid login credentials.");
        }
    }

    function signup() {
        let username = document.getElementById("username").value;
        let position = document.getElementById("position").value;
        let password = document.getElementById("password").value;

        let users = JSON.parse(localStorage.getItem("users") || "[]");
        users.push({ username, position, password });
        localStorage.setItem("users", JSON.stringify(users));

        alert("Account created! Please log in.");
    }

    function logout() {
        localStorage.removeItem("loggedInUser");
        showLoginPage();
    }

    function submitLog() {
        let logName = document.getElementById("logName").value;
        let logReason = document.getElementById("logReason").value;
        let logDescription = document.getElementById("logDescription").value;

        let logs = JSON.parse(localStorage.getItem("logs") || "[]");
        logs.push({ logName, logReason, logDescription, status: "Awaiting Resolution", assignedTo: null });
        localStorage.setItem("logs", JSON.stringify(logs));

        document.getElementById("logName").value = "";
        document.getElementById("logReason").value = "";
        document.getElementById("logDescription").value = "";

        loadLogs();
        showSection("logs");
    }

    function loadLogs() {
        let logs = JSON.parse(localStorage.getItem("logs") || "[]");
        let logList = document.getElementById("logList");
        logList.innerHTML = "";

        logs.forEach((log, index) => {
            let div = document.createElement("div");
            div.className = "log " + (log.status === "Resolved" ? "resolved" : log.assignedTo ? "assigned" : "");
            div.innerHTML = `<strong>${log.logName}</strong><br>${log.logReason}<br>${log.logDescription}<br>Status: ${log.status}
                <button onclick="assignLog(${index})">Assign</button>
                <button onclick="resolveLog(${index})">Resolve</button>`;
            logList.appendChild(div);
        });
    }

    function assignLog(index) {
        let logs = JSON.parse(localStorage.getItem("logs") || "[]");
        let user = JSON.parse(localStorage.getItem("loggedInUser"));
        logs[index].status = `Claimed by ${user.username} - ${user.position}`;
        localStorage.setItem("logs", JSON.stringify(logs));
        loadLogs();
    }

    function resolveLog(index) {
        let logs = JSON.parse(localStorage.getItem("logs") || "[]");
        let user = JSON.parse(localStorage.getItem("loggedInUser"));
        logs[index].status = `Resolved by ${user.username} - ${user.position}`;
        localStorage.setItem("logs", JSON.stringify(logs));
        loadLogs();
    }
</script>

</body>
</html>
